{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://wszdb-flarumaichat/webpack/bootstrap","webpack://wszdb-flarumaichat/webpack/runtime/compat get default export","webpack://wszdb-flarumaichat/webpack/runtime/define property getters","webpack://wszdb-flarumaichat/webpack/runtime/hasOwnProperty shorthand","webpack://wszdb-flarumaichat/webpack/runtime/make namespace object","webpack://wszdb-flarumaichat/external root \"flarum.core.compat['common/app']\"","webpack://wszdb-flarumaichat/./src/common/index.ts","webpack://wszdb-flarumaichat/external root \"flarum.core.compat['admin/app']\"","webpack://wszdb-flarumaichat/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://wszdb-flarumaichat/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://wszdb-flarumaichat/external root \"flarum.core.compat['common/components/Button']\"","webpack://wszdb-flarumaichat/./src/admin/components/ChatGptSettings.tsx","webpack://wszdb-flarumaichat/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://wszdb-flarumaichat/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('wszdb/flarumaichat', () => {});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import app from 'flarum/admin/app';\r\nimport ExtensionPage, { ExtensionPageAttrs } from 'flarum/admin/components/ExtensionPage';\r\nimport Button from 'flarum/common/components/Button';\r\n\r\n// Fallback models in case cached models are not available\r\nconst FALLBACK_MODELS = [\r\n  'gpt-4.5-preview',\r\n  'gpt-4o',\r\n  'gpt-4o-mini',\r\n  'gpt-4-turbo',\r\n  'gpt-4',\r\n  'gpt-3.5-turbo',\r\n  'gpt-3.5-turbo-instruct',\r\n  'o1-preview',\r\n  'o1-mini',\r\n  'chatgpt-4o-latest',\r\n];\r\n\r\nexport default class ChatGptSettings extends ExtensionPage {\r\n  loading!: boolean;\r\n  isFetchingModels!: boolean;\r\n  models!: Record<string, string>;\r\n\r\n  oninit(vnode: any) {\r\n    super.oninit(vnode);\r\n    this.loading = false;\r\n    this.isFetchingModels = false;\r\n    this.models = this.getModels();\r\n  }\r\n\r\n  getModels() {\r\n    try {\r\n      const cachedModels = app.data.settings['wszdb-flarumaichat.cached_models'];\r\n      if (cachedModels && cachedModels !== '[]') {\r\n        const parsed = JSON.parse(cachedModels);\r\n        if (Array.isArray(parsed) && parsed.length > 0) {\r\n          return parsed.reduce((acc, model) => {\r\n            acc[model.id] = model.id;\r\n            return acc;\r\n          }, {});\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to parse cached models:', e);\r\n    }\r\n\r\n    // Return fallback models\r\n    return FALLBACK_MODELS.reduce((acc, modelId) => {\r\n      acc[modelId] = modelId;\r\n      return acc;\r\n    }, {} as Record<string, string>);\r\n  }\r\n\r\n  fetchModels() {\r\n    this.isFetchingModels = true;\r\n\r\n    app\r\n      .request<{ models: any[]; count: number; last_fetched: number }>({\r\n        method: 'POST',\r\n        url: app.forum.attribute('apiUrl') + '/chatgpt/fetch-models',\r\n      })\r\n      .then(\r\n        (response) => {\r\n          this.isFetchingModels = false;\r\n\r\n          // Update cached models in settings\r\n          app.data.settings['wszdb-flarumaichat.cached_models'] = JSON.stringify(response.models);\r\n          app.data.settings['wszdb-flarumaichat.models_last_fetched'] = response.last_fetched.toString();\r\n\r\n          // Refresh models list\r\n          this.models = this.getModels();\r\n\r\n          app.alerts.show(\r\n            {\r\n              type: 'success',\r\n            },\r\n            app.translator.trans('wszdb-flarumaichat.admin.settings.models_fetched_success', {\r\n              count: response.count,\r\n            })\r\n          );\r\n\r\n          m.redraw();\r\n        },\r\n        (error) => {\r\n          this.isFetchingModels = false;\r\n\r\n          app.alerts.show(\r\n            {\r\n              type: 'error',\r\n            },\r\n            app.translator.trans('wszdb-flarumaichat.admin.settings.fetch_models_error')\r\n          );\r\n\r\n          m.redraw();\r\n        }\r\n      );\r\n  }\r\n\r\n  getLastFetchedText() {\r\n    const timestamp = parseInt(app.data.settings['wszdb-flarumaichat.models_last_fetched'] || '0');\r\n\r\n    if (timestamp === 0) {\r\n      return app.translator.trans('wszdb-flarumaichat.admin.settings.models_never_fetched');\r\n    }\r\n\r\n    const date = new Date(timestamp * 1000);\r\n    return app.translator.trans('wszdb-flarumaichat.admin.settings.models_last_fetched', {\r\n      date: date.toLocaleString(),\r\n    });\r\n  }\r\n\r\n  content() {\r\n    return (\r\n      <div className=\"ExtensionPage-settings\">\r\n        <div className=\"container\">\r\n          <div className=\"Form\">\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.api_key',\r\n              type: 'text',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.api_key_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.api_key_help', {\r\n                a: <a href=\"https://platform.openai.com/account/api-keys\" target=\"_blank\" rel=\"noopener\" />,\r\n              }),\r\n              placeholder: 'sk-...',\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.base_uri',\r\n              type: 'text',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.base_uri_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.base_uri_help'),\r\n              placeholder: 'api.openai.com',\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.model',\r\n              type: 'dropdown',\r\n              options: this.models,\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.model_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.model_help', {\r\n                a: <a href=\"https://platform.openai.com/docs/models/overview\" target=\"_blank\" rel=\"noopener\" />,\r\n              }),\r\n            })}\r\n            <div className=\"Form-group\">\r\n              <label>{app.translator.trans('wszdb-flarumaichat.admin.settings.fetch_models_label')}</label>\r\n              <div>\r\n                <Button\r\n                  className=\"Button Button--primary\"\r\n                  onclick={() => this.fetchModels()}\r\n                  loading={this.isFetchingModels}\r\n                  disabled={this.isFetchingModels}\r\n                >\r\n                  {app.translator.trans('wszdb-flarumaichat.admin.settings.fetch_models_button')}\r\n                </Button>\r\n                <p className=\"helpText\">{this.getLastFetchedText()}</p>\r\n              </div>\r\n            </div>\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.max_tokens',\r\n              type: 'number',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.max_tokens_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.max_tokens_help', {\r\n                a: <a href=\"https://help.openai.com/en/articles/4936856\" target=\"_blank\" rel=\"noopener\" />,\r\n              }),\r\n              default: 100,\r\n            })}\r\n            {/* new setting for moderation */}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.moderation',\r\n              type: 'boolean',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.moderation_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.moderation_help'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.user_prompt',\r\n              type: 'text',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.user_prompt_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.user_prompt_help'),\r\n            })}\r\n            {/* new settings for role */}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.role',\r\n              type: 'text',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.role_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.role_help'),\r\n            })}\r\n            {/* new settings for prompt */}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.prompt',\r\n              type: 'text',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.prompt_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.prompt_help'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.user_prompt_badge_text',\r\n              type: 'text',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.user_prompt_badge_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.user_prompt_badge_help'),\r\n            })}\r\n            {/*new setting for queue_active */}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.queue_active',\r\n              type: 'boolean',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.queue_active_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.queue_active_help'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.answer_duration',\r\n              type: 'number',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.answer_duration_label'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.enable_on_reply',\r\n              type: 'boolean',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.enable_on_reply_label'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.enable_on_discussion_started',\r\n              type: 'boolean',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.enable_on_discussion_started_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.enable_on_discussion_started_help'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.continue_to_reply',\r\n              type: 'boolean',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.continue_to_reply_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.continue_to_reply_help'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              setting: 'wszdb-flarumaichat.continue_to_reply_count',\r\n              type: 'number',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.continue_to_reply_count_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.continue_to_reply_count_help'),\r\n            })}\r\n            {this.buildSettingComponent({\r\n              type: 'flarum-tags.select-tags',\r\n              setting: 'wszdb-flarumaichat.enabled-tags',\r\n              label: app.translator.trans('wszdb-flarumaichat.admin.settings.enabled_tags_label'),\r\n              help: app.translator.trans('wszdb-flarumaichat.admin.settings.enabled_tags_help'),\r\n              options: {\r\n                requireParentTag: false,\r\n                limits: {\r\n                  max: {\r\n                    secondary: 0,\r\n                  },\r\n                },\r\n              },\r\n            })}\r\n            <div className=\"Form-group\">{this.submitButton()}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","import app from 'flarum/admin/app';\r\nimport ChatGptSettings from './components/ChatGptSettings';\r\n\r\napp.initializers.add('wszdb-flarumaichat', () => {\r\n  app.extensionData\r\n    .for('wszdb-flarumaichat')\r\n    .registerPermission(\r\n      {\r\n        label: app.translator.trans('wszdb-flarumaichat.admin.permissions.use_chatgpt_assistant_label'),\r\n        icon: 'fas fa-comment',\r\n        permission: 'discussion.useChatGPTAssistant',\r\n        allowGuest: false,\r\n      },\r\n      'start'\r\n    )\r\n    .registerPage(ChatGptSettings);\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","FALLBACK_MODELS","ChatGptSettings","_ExtensionPage","subClass","superClass","_this","_len","arguments","length","args","Array","_key","apply","concat","loading","isFetchingModels","models","create","constructor","_proto","oninit","vnode","this","getModels","cachedModels","settings","parsed","JSON","parse","isArray","reduce","acc","model","id","e","console","error","modelId","fetchModels","_this2","method","url","attribute","then","response","stringify","last_fetched","toString","show","type","trans","count","m","redraw","getLastFetchedText","timestamp","parseInt","date","Date","toLocaleString","content","_this3","className","buildSettingComponent","setting","label","help","href","target","rel","placeholder","options","Button","onclick","disabled","default","requireParentTag","limits","max","secondary","submitButton","ExtensionPage","registerPermission","icon","permission","allowGuest","registerPage"],"sourceRoot":""}
